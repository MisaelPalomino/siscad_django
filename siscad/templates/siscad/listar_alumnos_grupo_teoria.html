<!DOCTYPE html>
<html>

<head>
    <title>Listar Alumnos de Curso Teoría</title>
    <style>
        table,
        th,
        td {
            border: 1px solid black;
            border-collapse: collapse;
            padding: 5px;
        }

        #buscador {
            margin-top: 10px;
            margin-bottom: 10px;
            padding: 5px;
            width: 300px;
        }
    </style>
    <script>
        function filtrarTabla() {
            var input = document.getElementById("buscador");
            var filtro = input.value.toLowerCase();
            var tabla = document.getElementById("tablaAlumnos");
            var filas = tabla.getElementsByTagName("tr");

            for (var i = 1; i < filas.length; i++) {
                var celdas = filas[i].getElementsByTagName("td");
                var coincide = false;

                for (var j = 0; j < celdas.length; j++) {
                    var texto = celdas[j].textContent || celdas[j].innerText;
                    if (texto.toLowerCase().includes(filtro)) {
                        coincide = true;
                        break;
                    }
                }
                filas[i].style.display = coincide ? "" : "none";
            }
        }
    </script>
</head>

<body>
    <h1>Seleccionar Curso y Turno</h1>

    <!-- Formulario para seleccionar curso y turno -->
    <form method="POST">
        {% csrf_token %}
        <label>Curso:</label>
        <select name="curso_nombre" required>
            <option value="">--Seleccione un curso--</option>
            {% for curso in cursos %}
            <option value="{{ curso.id }}">{{ curso.nombre }}</option>
            {% endfor %}
        </select>

        <label>Turno:</label>
        <select name="curso_turno" required>
            <option value="mañana">Mañana</option>
            <option value="tarde">Tarde</option>
            <option value="noche">Noche</option>
        </select>

        <button type="submit">Buscar</button>
    </form>

    <hr>

    {% if alumnos %}
    <h2>Alumnos Matriculados</h2>
    <input type="text" id="buscador" placeholder="Buscar alumno..." onkeyup="filtrarTabla()">

    <table id="tablaAlumnos">
        <thead>
            <tr>
                <th>Nombre</th>
                <th>Email</th>
                <th>DNI</th>
                <th>CUI</th>
            </tr>
        </thead>
        <tbody>
            {% for alumno in alumnos %}
            <tr>
                <td>{{ alumno.nombre }}</td>
                <td>{{ alumno.email }}</td>
                <td>{{ alumno.dni }}</td>
                <td>{{ alumno.cui }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p>No hay alumnos matriculados o no se ha realizado búsqueda.</p>
    {% endif %}
</body>

</html>