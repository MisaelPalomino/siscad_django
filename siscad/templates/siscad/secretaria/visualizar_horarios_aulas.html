<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Horarios por Aula</title>
    <style>
        :root {
            --color-guinda: #800020;
            --color-guinda-claro: #a04060;
            --color-guinda-suave: #f5e8ed;
            --color-gris: #f8f9fa;
            --color-gris-oscuro: #6c757d;
            --color-blanco: #ffffff;
            --color-sombra: rgba(128, 0, 32, 0.1);
            --color-borde: #e0a0b0;
            --color-exito: #28a745;
            --color-error: #dc3545;
            --color-advertencia: #ffc107;
            --color-info: #17a2b8;
            --color-ocupado: #ff6b6b;
            --color-libre: #51cf66;
            --color-parcial: #ffd43b;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--color-gris);
            color: #333;
            line-height: 1.6;
            padding-bottom: 30px;
        }

        .dashboard-container {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* Header y Navegación */
        .header {
            background: linear-gradient(135deg, var(--color-guinda) 0%, var(--color-guinda-claro) 100%);
            color: white;
            padding: 20px 30px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header h1 {
            font-size: 1.8rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-menu {
            display: flex;
            gap: 15px;
        }

        .btn-nav {
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            backdrop-filter: blur(10px);
        }

        .btn-nav:hover {
            background-color: white;
            color: var(--color-guinda);
            transform: translateY(-2px);
        }

        /* Contenido principal */
        .main-content {
            padding: 30px;
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
        }

        /* Botón de volver al menú en la parte superior */
        .back-to-menu {
            display: inline-block;
            margin-bottom: 20px;
            color: var(--color-guinda);
            text-decoration: none;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: color 0.3s;
        }

        .back-to-menu:hover {
            color: var(--color-guinda-claro);
            text-decoration: underline;
        }

        /* Tarjetas de horarios */
        .card {
            background-color: var(--color-blanco);
            border-radius: 12px;
            box-shadow: 0 6px 15px var(--color-sombra);
            padding: 25px;
            margin-bottom: 30px;
            border-top: 4px solid var(--color-guinda);
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card h2 {
            color: var(--color-guinda);
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--color-borde);
            font-size: 1.6rem;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        /* Panel de estadísticas */
        .estadisticas {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .estadistica-card {
            background: linear-gradient(135deg, var(--color-guinda) 0%, var(--color-guinda-claro) 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .estadistica-valor {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .estadistica-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* Tabla de horarios */
        .tabla-container {
            overflow-x: auto;
            margin-top: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            position: relative;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background-color: var(--color-blanco);
            min-width: 800px;
        }

        thead {
            background: linear-gradient(135deg, var(--color-guinda) 0%, var(--color-guinda-claro) 100%);
        }

        th {
            color: white;
            font-weight: 600;
            text-align: center;
            padding: 18px 12px;
            position: sticky;
            top: 0;
            border-right: 1px solid rgba(255, 255, 255, 0.2);
            font-size: 0.95rem;
        }

        th:first-child {
            border-radius: 10px 0 0 0;
        }

        th:last-child {
            border-radius: 0 10px 0 0;
            border-right: none;
        }

        td {
            padding: 14px 12px;
            border-bottom: 1px solid var(--color-borde);
            border-right: 1px solid var(--color-borde);
            text-align: center;
            vertical-align: middle;
            transition: background-color 0.2s;
            font-size: 0.9rem;
        }

        td:last-child {
            border-right: none;
        }

        tr:hover td {
            background-color: var(--color-guinda-suave);
        }

        tr:last-child td {
            border-bottom: none;
        }

        /* Celdas especiales */
        .celda-hora {
            background-color: var(--color-guinda-suave);
            font-weight: 600;
            color: var(--color-guinda);
            border-right: 2px solid var(--color-borde);
            position: sticky;
            left: 0;
            z-index: 10;
        }

        .celda-ocupada {
            background-color: var(--color-ocupado);
            color: white;
            font-weight: 500;
            border-radius: 4px;
            padding: 10px 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
            min-height: 50px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .celda-ocupada::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background-color: rgba(255, 255, 255, 0.3);
        }

        .celda-ocupada span {
            font-size: 0.8rem;
            opacity: 0.9;
        }

        .celda-vacia {
            background-color: var(--color-libre);
            color: white;
            border-radius: 4px;
            font-weight: 500;
            padding: 10px 8px;
            opacity: 0.7;
            transition: opacity 0.3s;
        }

        .celda-vacia:hover {
            opacity: 1;
        }

        /* Información del curso en celdas ocupadas */
        .curso-info {
            font-size: 0.75rem;
            margin-top: 4px;
            opacity: 0.9;
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 20px;
            color: var(--color-gris-oscuro);
            font-size: 0.9rem;
            margin-top: auto;
            border-top: 1px solid var(--color-borde);
        }

        /* Leyenda */
        .leyenda {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 25px;
            padding: 15px;
            background-color: var(--color-guinda-suave);
            border-radius: 8px;
            flex-wrap: wrap;
        }

        .leyenda-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }

        .color-box {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }

        .color-ocupado {
            background-color: var(--color-ocupado);
        }

        .color-libre {
            background-color: var(--color-libre);
        }

        /* Botones de filtro */
        .filtros-aulas {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .btn-filtro {
            padding: 10px 20px;
            border: 2px solid var(--color-guinda);
            background-color: transparent;
            color: var(--color-guinda);
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-filtro:hover {
            background-color: var(--color-guinda);
            color: white;
        }

        .btn-filtro.active {
            background-color: var(--color-guinda);
            color: white;
        }

        /* Mensaje vacío */
        .mensaje-vacio {
            text-align: center;
            padding: 50px 20px;
            color: var(--color-gris-oscuro);
            font-size: 1.1rem;
        }

        .mensaje-vacio svg {
            margin-bottom: 15px;
            opacity: 0.5;
        }

        /* Responsividad */
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .nav-menu {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .main-content {
                padding: 20px 15px;
            }
            
            .card {
                padding: 20px 15px;
            }
            
            .estadisticas {
                grid-template-columns: 1fr;
            }
            
            .estadistica-card {
                padding: 15px;
            }
            
            .estadistica-valor {
                font-size: 2rem;
            }
            
            th, td {
                padding: 10px 8px;
                font-size: 0.85rem;
            }
            
            .celda-ocupada, .celda-vacia {
                padding: 8px 6px;
                font-size: 0.8rem;
            }
            
            .curso-info {
                font-size: 0.7rem;
            }
            
            .leyenda {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.5rem;
            }
            
            .btn-nav {
                padding: 8px 15px;
                font-size: 0.9rem;
            }
            
            .card h2 {
                font-size: 1.3rem;
            }
            
            .filtros-aulas {
                flex-direction: column;
            }
            
            .btn-filtro {
                width: 100%;
                justify-content: center;
            }
        }

        /* Animaciones */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card {
            animation: fadeIn 0.5s ease-out;
        }
    </style>
    <script>
        // Función para filtrar aulas
        function filtrarAulas(tipo) {
            const cards = document.querySelectorAll('.aula-card');
            const filtros = document.querySelectorAll('.btn-filtro');
            
            // Actualizar botones activos
            filtros.forEach(btn => {
                if (btn.dataset.filtro === tipo) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
            
            // Mostrar/ocultar cards
            cards.forEach(card => {
                if (tipo === 'todas') {
                    card.style.display = 'block';
                } else if (tipo === 'ocupadas') {
                    const tieneOcupados = card.querySelector('.celda-ocupada');
                    card.style.display = tieneOcupados ? 'block' : 'none';
                } else if (tipo === 'disponibles') {
                    const tieneLibres = card.querySelector('.celda-vacia');
                    card.style.display = tieneLibres ? 'block' : 'none';
                }
            });
            
            // Actualizar contador
            const cardsVisibles = document.querySelectorAll('.aula-card[style*="block"], .aula-card:not([style])');
            document.getElementById('contador-aulas').textContent = cardsVisibles.length;
        }
        
        // Función para resaltar una celda específica
        function resaltarCelda(aula, dia, bloque) {
            const celdas = document.querySelectorAll(`[data-aula="${aula}"][data-dia="${dia}"][data-bloque="${bloque}"]`);
            celdas.forEach(celda => {
                celda.style.transform = 'scale(1.05)';
                celda.style.boxShadow = '0 0 15px rgba(255, 107, 107, 0.5)';
                setTimeout(() => {
                    celda.style.transform = '';
                    celda.style.boxShadow = '';
                }, 2000);
            });
        }
        
        // Inicializar cuando se carga la página
        document.addEventListener('DOMContentLoaded', function() {
            // Agregar datos a las celdas para filtrado
            const celdasOcupadas = document.querySelectorAll('.celda-ocupada');
            celdasOcupadas.forEach(celda => {
                const info = celda.textContent;
                if (info.includes('Lab')) {
                    celda.style.backgroundColor = '#ff8e8e'; // Rojo más claro para laboratorios
                } else if (info.includes('Teo')) {
                    celda.style.backgroundColor = '#ffa8a8'; // Rojo aún más claro para teoría
                }
            });
            
            // Contar aulas ocupadas y libres
            const cards = document.querySelectorAll('.aula-card');
            let ocupadas = 0;
            let disponibles = 0;
            
            cards.forEach(card => {
                const tieneOcupados = card.querySelector('.celda-ocupada');
                if (tieneOcupados) {
                    ocupadas++;
                } else {
                    disponibles++;
                }
            });
            
            // Actualizar estadísticas si los elementos existen
            const estadisticaOcupadas = document.getElementById('estadistica-ocupadas');
            const estadisticaDisponibles = document.getElementById('estadistica-disponibles');
            
            if (estadisticaOcupadas) estadisticaOcupadas.textContent = ocupadas;
            if (estadisticaDisponibles) estadisticaDisponibles.textContent = disponibles;
            
            // Mostrar todas las aulas por defecto
            filtrarAulas('todas');
        });
    </script>
</head>
<body>
    <div class="dashboard-container">
        <header class="header">
            <h1>
                <svg width="28" height="28" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"/>
                    <path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"/>
                </svg>
                Horario de Aulas
            </h1>
            <div class="nav-menu">
                <a href="{% url 'inicio_secretaria' %}" class="btn-nav">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4H2.5z"/>
                    </svg>
                    Volver al Menú
                </a>
            </div>
        </header>

        <main class="main-content">
            <a href="{% url 'inicio_secretaria' %}" class="back-to-menu">
                <svg width="18" height="18" fill="currentColor" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"/>
                </svg>
                Volver al Menú Principal
            </a>
            
            <div class="estadisticas">
                <div class="estadistica-card">
                    <div class="estadistica-valor">{{ tabla_horarios|length }}</div>
                    <div class="estadistica-label">Total de Aulas</div>
                </div>
                <div class="estadistica-card">
                    <div class="estadistica-valor" id="estadistica-ocupadas">0</div>
                    <div class="estadistica-label">Aulas Ocupadas</div>
                </div>
                <div class="estadistica-card">
                    <div class="estadistica-valor" id="estadistica-disponibles">0</div>
                    <div class="estadistica-label">Aulas Disponibles</div>
                </div>
                <div class="estadistica-card">
                    <div class="estadistica-valor">{{ dias_lista|length }}</div>
                    <div class="estadistica-label">Días de Clase</div>
                </div>
            </div>
            
            <div class="filtros-aulas">
                <button class="btn-filtro active" data-filtro="todas" onclick="filtrarAulas('todas')">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3zM2.5 2a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zm6.5.5A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zM1 10.5A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zm6.5.5A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3z"/>
                    </svg>
                    Todas las Aulas
                </button>
                <button class="btn-filtro" data-filtro="ocupadas" onclick="filtrarAulas('ocupadas')">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M8.515 1.019A7 7 0 0 0 8 1V0a8 8 0 0 1 .589.022l-.074.997zm2.004.45a7.003 7.003 0 0 0-.985-.299l.219-.976c.383.086.76.2 1.126.342l-.36.933zm1.37.71a7.01 7.01 0 0 0-.439-.27l.493-.87a8.025 8.025 0 0 1 .979.654l-.615.789a6.996 6.996 0 0 0-.418-.302zm1.834 1.79a6.99 6.99 0 0 0-.653-.796l.724-.69c.27.285.52.59.747.91l-.818.576zm.744 1.352a7.08 7.08 0 0 0-.214-.468l.893-.45a7.976 7.976 0 0 1 .45 1.088l-.95.313a7.023 7.023 0 0 0-.179-.483zm.53 2.507a6.991 6.991 0 0 0-.1-1.025l.985-.17c.067.386.106.778.116 1.17l-1 .025zm-.131 1.538c.033-.17.06-.339.081-.51l.993.123a7.957 7.957 0 0 1-.23 1.155l-.964-.267c.046-.165.086-.332.12-.501zm-.952 2.379c.184-.29.346-.594.486-.908l.914.405c-.16.36-.345.706-.555 1.038l-.845-.535zm-.964 1.205c.122-.122.239-.248.35-.378l.758.653a8.073 8.073 0 0 1-.401.432l-.707-.707z"/>
                        <path d="M8 1a7 7 0 1 0 4.95 11.95l.707.707A8.001 8.001 0 1 1 8 0v1z"/>
                        <path d="M7.5 3a.5.5 0 0 1 .5.5v5.21l3.248 1.856a.5.5 0 0 1-.496.868l-3.5-2A.5.5 0 0 1 7 9V3.5a.5.5 0 0 1 .5-.5z"/>
                    </svg>
                    Aulas Ocupadas
                </button>
                <button class="btn-filtro" data-filtro="disponibles" onclick="filtrarAulas('disponibles')">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/>
                    </svg>
                    Aulas Disponibles
                </button>
                <div style="margin-left: auto; display: flex; align-items: center; gap: 8px; color: var(--color-gris-oscuro);">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M9.5 0a.5.5 0 0 1 .5.5.5.5 0 0 0 .5.5.5.5 0 0 1 .5.5V2a.5.5 0 0 1-.5.5h-5A.5.5 0 0 1 5 2v-.5a.5.5 0 0 1 .5-.5.5.5 0 0 0 .5-.5.5.5 0 0 1 .5-.5h3Z"/>
                        <path d="M3 2.5a.5.5 0 0 1 .5-.5H4a.5.5 0 0 0 0-1h-.5A1.5 1.5 0 0 0 2 2.5v12A1.5 1.5 0 0 0 3.5 16h9a1.5 1.5 0 0 0 1.5-1.5v-12A1.5 1.5 0 0 0 12.5 1H12a.5.5 0 0 0 0 1h.5a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5v-12Z"/>
                        <path d="M10.854 7.854a.5.5 0 0 0-.708-.708L7.5 9.793 6.354 8.646a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0l3-3Z"/>
                    </svg>
                    Mostrando: <span id="contador-aulas">{{ tabla_horarios|length }}</span> aulas
                </div>
            </div>
            
            {% if tabla_horarios %}
                {% for aula, bloques in tabla_horarios.items %}
                <div class="card aula-card" id="aula-{{ aula|slugify }}">
                    <h2>
                        <svg width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h13zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z"/>
                            <path d="M3 5.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 8a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 8zm0 2.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5z"/>
                        </svg>
                        Aula: {{ aula }}
                    </h2>
                    
                    <div class="tabla-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Hora / Día</th>
                                    {% for dia, nombre in dias_lista %}
                                        <th>{{ nombre }}</th>
                                    {% endfor %}
                                </tr>
                            </thead>
                            <tbody>
                                {% for fila in bloques %}
                                    <tr>
                                        <td class="celda-hora">{{ fila.bloque }}</td>
                                        {% for dia, valor in fila.dias %}
                                            {% if valor %}
                                                <td class="celda-ocupada" 
                                                    data-aula="{{ aula }}"
                                                    data-dia="{{ dia.0 }}"
                                                    data-bloque="{{ fila.bloque }}"
                                                    title="{{ valor }}">
                                                    {{ valor|truncatechars:30 }}
                                                    {% if valor|length > 30 %}
                                                    <div class="curso-info">
                                                        <span>Ver más...</span>
                                                    </div>
                                                    {% endif %}
                                                </td>
                                            {% else %}
                                                <td class="celda-vacia"
                                                    data-aula="{{ aula }}"
                                                    data-dia="{{ dia.0 }}"
                                                    data-bloque="{{ fila.bloque }}"
                                                    title="Disponible">
                                                    Libre
                                                </td>
                                            {% endif %}
                                        {% endfor %}
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
                {% endfor %}
                
                <div class="leyenda">
                    <div class="leyenda-item">
                        <div class="color-box color-ocupado"></div>
                        <span>Horario Ocupado</span>
                    </div>
                    <div class="leyenda-item">
                        <div class="color-box color-libre"></div>
                        <span>Disponible</span>
                    </div>
                    <div class="leyenda-item">
                        <svg width="20" height="20" fill="var(--color-guinda)" viewBox="0 0 16 16">
                            <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"/>
                        </svg>
                        <span>Pase el cursor sobre las celdas para ver más información</span>
                    </div>
                </div>
            {% else %}
                <div class="mensaje-vacio">
                    <svg width="64" height="64" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                        <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
                    </svg>
                    <h3 style="color: var(--color-gris-oscuro); margin-bottom: 10px;">No hay horarios registrados</h3>
                    <p>No se encontraron horarios de aulas en el sistema.</p>
                </div>
            {% endif %}
        </main>

        <footer class="footer">
            <p>Sistema de Gestión de Horarios &copy; {% now "Y" %}</p>
            <p>Generado el {% now "d/m/Y H:i" %}</p>
        </footer>
    </div>
</body>
</html>